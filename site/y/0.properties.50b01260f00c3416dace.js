webpackJsonp([0],{74:function(e,t,n){e.exports={default:n(239),__esModule:!0}},118:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(18),o=a(l),r=n(74),u=a(r),i=n(6),s=a(i),d=n(7),p=a(d),c=n(8),f=a(c),m=n(10),y=a(m),h=n(9),v=a(h),g=n(1),b=a(g);n(17);n(137);var E=function(e){function t(){(0,p.default)(this,t);var e=(0,y.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return e.onPropertySelect=function(t){e.props.onPropertySelect(t)},e.renderEditButton=function(t){return b.default.createElement("button",{type:"button",onClick:function(){e.onPropertySelect(t)},className:"btn btn-primary"},"Edit")},e.components={},e.state={name:"",file:null,imageURL:null,edit:!1,town:null},e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){}},{key:"deleteItem",value:function(e){this.props.onDelete(e)}},{key:"renderRows",value:function(e){var t=this,n=this.props,a=n.canDelete,l=n.renderEditButton;if(e&&(e=(0,u.default)(e).map(function(t){return(0,o.default)({key:t},e[t])})))return e.map(function(e,n){return b.default.createElement("tr",{key:n},b.default.createElement("td",null,n+1,"."),b.default.createElement("td",null,e.name),b.default.createElement("td",null,b.default.createElement("img",{src:e.image?e.image.uri:"",width:50})),b.default.createElement("td",{className:"manageBtns"},null!=l?l(e):t.renderEditButton(e),a?b.default.createElement("button",{type:"button",onClick:function(){t.deleteItem(e.key)},className:"btn btn-danger"},"Delete"):null))})}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.onAddItem,a=e.canAdd,l=this.state;l.edit,l.name;return b.default.createElement("div",{className:"box-body",style:{backgroundColor:"white"}},b.default.createElement("h3",null,"Properties:"),a?b.default.createElement("div",{style:{width:"100%",textAlign:"right",paddingBottom:"15px"}},b.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:n},"Add Property")):null,b.default.createElement("table",{className:"table table-bordered"},b.default.createElement("tbody",null,b.default.createElement("tr",null,b.default.createElement("th",{style:{width:10}},"#"),b.default.createElement("th",null,"Task"),b.default.createElement("th",null,"Progress"),b.default.createElement("th",{style:{width:200}},"Label")),this.renderRows(t))))}}]),t}(g.Component);t.default=E,E.propTypes={items:g.PropTypes.any,onAddItem:g.PropTypes.func,onDelete:g.PropTypes.func,canDelete:g.PropTypes.bool,canAdd:g.PropTypes.bool,onPropertySelect:g.PropTypes.func,renderEditButton:g.PropTypes.func},E.defaultProps={canDelete:!0,canAdd:!0,renderEditButton:null}},119:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DB_NAME=void 0;var l=n(24),o=n(17),r=n(206),u=a(r),i=o.helpers.dataToJS,s=(t.DB_NAME="/properties",{}),d=function(e){return{properties:i(e.firebaseStateReducer,"/properties")}},p=(0,o.firebaseConnect)(["/properties"])(u.default);t.default=(0,l.connect)(d,s)(p)},137:282,193:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ModalButton=void 0;var l=n(6),o=a(l),r=n(7),u=a(r),i=n(8),s=a(i),d=n(10),p=a(d),c=n(9),f=a(c),m=n(1),y=a(m);n(286);var h=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.modalTitle,a=e.closeLabel,l=e.modalId,o=e.onCancel,r=e.onSubmit,u=e.canSubmit,i=e.submitLabel;return y.default.createElement("div",null,y.default.createElement("div",{className:"modal fade",id:l,tabIndex:-1,role:"dialog","aria-labelledby":"myModalLabel"},y.default.createElement("div",{className:"modal-dialog",role:"document"},y.default.createElement("div",{className:"modal-content"},y.default.createElement("div",{className:"modal-header"},y.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},y.default.createElement("span",{"aria-hidden":"true"},"Ã—")),y.default.createElement("div",{style:{textAlign:"center"}},y.default.createElement("h2",{className:"modal-title",id:"myModalLabel"},n))),y.default.createElement("div",{className:"modal-body"},t),y.default.createElement("div",{className:"modal-footer"},y.default.createElement("button",{type:"button",onClick:o,className:"btn btn-default","data-dismiss":"modal"},a),u?y.default.createElement("button",{type:"button",onClick:r,"data-dismiss":"modal",className:"btn btn-primary"},i):null)))))}}]),t}(m.Component);h.propTypes={modalId:m.PropTypes.string.isRequired,onModalOpen:m.PropTypes.func,modalTitle:m.PropTypes.string,closeLabel:m.PropTypes.string,submitLabel:m.PropTypes.string,onSubmit:m.PropTypes.func,onCancel:m.PropTypes.func,canSubmit:m.PropTypes.bool},h.defaultProps={modalTitle:"",closeLabel:"Close",submitLabel:"Save Changes",canSubmit:!0};var v=t.ModalButton=function(e){var t=e.label,n=e.onClick,a=e.modalId,l=e.className;return y.default.createElement("button",{type:"button",className:"btn "+l,onClick:n,"data-toggle":"modal","data-target":"#"+a},t)};v.propTypes={label:m.PropTypes.string.isRequired,modalId:m.PropTypes.string.isRequired,className:m.PropTypes.string,onClick:m.PropTypes.func},v.defaultProps={className:"btn-primary"},t.default=h},201:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(18),o=a(l),r=n(6),u=a(r),i=n(7),s=a(i),d=n(8),p=a(d),c=n(10),f=a(c),m=n(9),y=a(m),h=n(1),v=a(h),g=n(202),b=a(g),E=n(17),P=(E.helpers.isLoaded,E.helpers.isEmpty,E.helpers.pathToJS,E.helpers.dataToJS,function(e){function t(){(0,s.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.onAddItemUpdate=function(t){var n=e.props.firebase,a=e.state.ref;console.log({updatedContact:t});var l={},o=t.key;l[o]=t;var r=t.file;null!=r?a.child(r.name).put(r).then(function(e){l[o].image={uri:e.downloadURL},n.update("/contacts",l)}):n.update("/contacts",l)},e.onPropertyLink=function(t,n){var a=e.props,l=a.towns,r=a.firebase,u=(0,o.default)({},l[t],{propertyId:n});console.log("onPropertyLink",u),r.ref("/towns/"+t).update(u)},e}return(0,y.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.firebase;if(e){var t=e.storage().ref(),n=t.child("images");this.state={ref:n},this.forms={}}}},{key:"render",value:function(){var e=this.props.contacts;return v.default.createElement("div",{style:{margin:"0 auto"}},v.default.createElement(b.default,{contacts:e,onUpdateItem:this.onAddItemUpdate}))}}]),t}(h.Component));t.default=P,P.propTypes={contacts:h.PropTypes.object}},202:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var l=n(18),o=a(l),r=n(74),u=a(r),i=n(6),s=a(i),d=n(7),p=a(d),c=n(8),f=a(c),m=n(10),y=a(m),h=n(9),v=a(h),g=n(1),b=a(g),E=n(17);n(285);var P=(E.helpers.isLoaded,E.helpers.isEmpty,E.helpers.pathToJS,E.helpers.dataToJS,function(e){function t(){(0,p.default)(this,t);var e=(0,y.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return e.onUpdateItemSubmit=function(t){e.props.onUpdateItem(t)},e.renderRows=function(t){var n=function(t){var n=e.state.contacts,a=-1;n.every(function(e,n){var l=t.key!=e.key;return l||(a=n),l}),a!=-1&&(n[a]=t,e.setState({contacts:n}))};if(t)return t.map(function(t,a){return b.default.createElement(_,{key:a,index:a+1,contact:t,onSubmit:e.onUpdateItemSubmit,onUpdate:n})})},e.components={},e.state={name:"",file:null,imageURL:null,edit:!1},e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.towns,n=e.properties;console.log("componentWillReceiveProps",e),this.setState({towns:t,properties:n,contacts:(0,u.default)(e.contacts).map(function(t){return(0,o.default)({key:t},e.contacts[t])})})}},{key:"render",value:function(){var e=this.state,t=(e.edit,e.name,e.towns);return console.log("render",t),b.default.createElement("div",{className:"box-body",style:{backgroundColor:"white"}},b.default.createElement("h3",null,"Contacts:"),b.default.createElement("table",{className:"table table-bordered"},b.default.createElement("tbody",null,b.default.createElement("tr",null,b.default.createElement("th",{style:{width:10}},"#"),b.default.createElement("th",{style:{width:200}},"Avatar"),b.default.createElement("th",null,"Info")),this.renderRows(this.state.contacts))))}}]),t}(g.Component));t.default=P;var _=function(e){function t(){var e,n,a,l;(0,p.default)(this,t);for(var o=arguments.length,r=Array(o),u=0;u<o;u++)r[u]=arguments[u];return n=a=(0,y.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(r))),a.onFormUpdated=function(e,t){console.log({key:e,value:t});var n=a.props.contact;n[e]=t,a.props.onUpdate(n)},l=n,(0,y.default)(a,l)}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this,t=this.props.contact,n=t.image,a=t.name,l=(t.file,t.title),o=t.phone,r=this.props,u=r.onSubmit,i=r.contact;return b.default.createElement("tr",null,b.default.createElement("td",null,this.props.index,"."),b.default.createElement("td",null,b.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},b.default.createElement(T,{label:"Image",imageURL:n?n.uri:null,onChange:function(t){var n=t.target.files[0];e.onFormUpdated("file",n)}}))),b.default.createElement("td",null,b.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},b.default.createElement("label",null,"Name:"),b.default.createElement("input",{type:"text",onChange:function(t){return e.onFormUpdated("name",t.target.value)},value:a,className:"form-control",placeholder:"Type here"}),b.default.createElement("label",null,"Title:"),b.default.createElement("input",{type:"text",onChange:function(t){return e.onFormUpdated("title",t.target.value)},value:l,className:"form-control",placeholder:"Type here"}),b.default.createElement("label",null,"Phone:"),b.default.createElement("input",{type:"text",onChange:function(t){return e.onFormUpdated("phone",t.target.value)},value:o,className:"form-control",placeholder:"Type here"})),b.default.createElement(I,{className:"btn-primary",onClick:function(){console.log("contact",{contact:i}),u(i)},label:"Update"})))}}]),t}(g.Component);_.propTypes={contact:g.PropTypes.object,index:g.PropTypes.number,onUpdate:g.PropTypes.func.isRequired,onSubmit:g.PropTypes.func.isRequired};var T=function(e){var t=(e.label,e.imageURL),n=e.description,a=void 0===n?"":n,l=(e.placeholder,e.onChange);return b.default.createElement("div",{className:"form-group"},C(t),b.default.createElement("br",null),b.default.createElement("input",{onChange:l,type:"file",accept:"image/*"}),b.default.createElement("p",{className:"help-block"},a))},C=function(e){if(e)return b.default.createElement("img",{width:"200",src:e})},I=t.Button=function(e){var t=e.label,n=e.onClick,a=e.className;return b.default.createElement("button",{type:"button",className:"btn "+a,onClick:n},t)};P.propTypes={contacts:g.PropTypes.any.isRequired,onUpdateItem:g.PropTypes.func.isRequired}},203:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(24),o=n(17),r=n(201),u=a(r),i=o.helpers.dataToJS,s={},d=function(e){var t=i(e.firebaseStateReducer,"/contacts");return console.log("contact container mapStateToProps contacts",{contacts:t}),{contacts:t}},p=(0,o.firebaseConnect)(["/contacts"])(u.default);t.default=(0,l.connect)(d,s)(p)},205:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(18),o=a(l),r=n(6),u=a(r),i=n(7),s=a(i),d=n(8),p=a(d),c=n(10),f=a(c),m=n(9),y=a(m),h=n(1),v=a(h),g=(n(17),n(210)),b=a(g),E=n(209),P=a(E),_=n(211),T=a(_),C=n(208),I=a(C),k=n(207),w=a(k);n(137);var N=function(e){function t(){(0,s.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.setInitialState=function(t){e.setState((0,o.default)({item:{name:"",key:null,townId:null,items:[],images:[],fileImages:[],features:[],description:""},isNew:!0},t))},e.onUpdateNode=function(t){var n=e.state.item;e.setState({item:(0,o.default)({},n,t)})},e.onUpdateItem=function(){e.props.onUpdate(e.state.item)},e.onCancel=function(){e.setInitialState(),e.props.onCancel()},e.onImagesDelete=function(t){var n=e.state.item.images;n.splice(t,1),e.setState({item:{images:n}})},e.components={},e.state={item:{name:"",key:null,townId:null,items:[],images:[],fileImages:[],features:[],description:""},isNew:!0},e}return(0,y.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.item,t=null==e.key;this.setInitialState({isNew:t,item:e})}},{key:"render",value:function(){var e=this,t=this.state.isNew,n=this.state.item,a=n.name,l=n.items,o=n.images,r=n.features,u=n.description;return v.default.createElement("div",{className:"box-body",style:{backgroundColor:"white"}},v.default.createElement("h3",null,t?"New Property":"Property: "+this.props.item.name),v.default.createElement("div",{style:{width:"100%",textAlign:"right",paddingBottom:"15px"}},v.default.createElement(b.default,{label:"Name:",name:a,onChange:function(t){e.onUpdateNode({name:t})}}),v.default.createElement(P.default,{images:o,onImagesDelete:this.onImagesDelete,onFileChange:function(t){e.onUpdateNode({fileImages:t})}}),v.default.createElement(T.default,{items:l,onItemsChange:function(t){e.onUpdateNode({items:t})}}),v.default.createElement(I.default,{items:r,onItemsChange:function(t){e.onUpdateNode({features:t})}}),v.default.createElement(w.default,{value:u,onItemsChange:function(t){e.onUpdateNode({description:t})}})),v.default.createElement("span",null,v.default.createElement("button",{type:"button",onClick:this.onCancel,className:"btn btn-danger btn-flat"},"Cancel"),v.default.createElement("span",{style:{width:20}}),v.default.createElement("button",{type:"button",onClick:this.onUpdateItem,className:"btn btn-primary btn-flat"},"Save")))}}]),t}(h.Component);t.default=N,N.propTypes={onCancel:h.PropTypes.func.isRequired,onUpdate:h.PropTypes.func.isRequired,updating:h.PropTypes.bool.isRequired,onUpdateNode:h.PropTypes.func.isRequired}},206:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(18),o=a(l),r=n(121),u=a(r),i=n(6),s=a(i),d=n(7),p=a(d),c=n(8),f=a(c),m=n(10),y=a(m),h=n(9),v=a(h),g=n(1),b=a(g),E=n(118),P=a(E),_=n(205),T=a(_),C=(n(17),n(119)),I=function(e){function t(){(0,p.default)(this,t);var e=(0,y.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return e.onPropertySelect=function(t){console.log("onPropertySelect",t),e.setState({selectedProperty:t})},e.onAddItemSubmit=function(){console.log("onAddItemSubmit"),e.setState({selectedProperty:{}})},e.onUpdate=function(t){var n=e.state.ref;e.setState({updating:!0}),console.log("onUpdate",t),null!=t.fileImages?(console.log("file names",t.fileImages.map(function(e){return e.name})),u.default.all(t.fileImages.map(function(e){return n.child(e.name).put(e)})).then(function(n){console.log("onUpdate Promise.all result: ",n),t.images=n.map(function(e){return e.downloadURL}),e.updateRecord(t)})):e.updateRecord(t)},e.updateRecord=function(t){var n=e.props.firebase;t.key?(console.log("updateRecord update",C.DB_NAME+"/"+t.key,t),n.ref(C.DB_NAME+"/"+t.key).update(t)):(console.log("updateRecord push",C.DB_NAME+"/"+t.key,t),n.push(C.DB_NAME,t)),e.setState({updating:!1,selectedProperty:null})},e.onDelete=function(t){var n=e.props.firebase,a={};a[t]=null,n.update(C.DB_NAME,a)},e.onUpdateNode=function(t){e.setState({selectedProperty:(0,o.default)({},e.state.selectedProperty,t)})},e.onCancel=function(){e.setState({selectedProperty:null})},e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.firebase;if(e){var t=e.storage().ref(),n=t.child("images");this.state={ref:n,selectedProperty:null,updating:!1},this.forms={}}}},{key:"render",value:function(){var e=this.props.properties;return console.log("render",this.state.selectedProperty),b.default.createElement("div",{style:{margin:"0 auto"}},this.renderProperties(this.state.selectedProperty,e))}},{key:"renderProperties",value:function(e,t){return e?b.default.createElement(T.default,{item:e,onUpdate:this.onUpdate,onUpdateNode:this.onUpdateNode,updating:this.state.updating,onCancel:this.onCancel}):b.default.createElement(P.default,{items:t,onAddItem:this.onAddItemSubmit,onDelete:this.onDelete,onPropertySelect:this.onPropertySelect})}}]),t}(g.Component);t.default=I,I.propTypes={properties:g.PropTypes.object}},207:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),o=a(l),r=n(7),u=a(r),i=n(8),s=a(i),d=n(10),p=a(d),c=n(9),f=a(c),m=n(1),y=a(m),h=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this))}return(0,f.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onItemsChange,a=e.placeholder;return y.default.createElement("div",null,y.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},y.default.createElement("label",null," Description: "),y.default.createElement("div",{className:"input-group margin",style:{width:"100%",paddingRight:"20px"}},y.default.createElement("textarea",{className:"form-control",style:{width:"100%"},rows:5,placeholder:a,autoComplete:"off",value:t,onChange:function(e){n(e.target.value)}}))))}}]),t}(m.Component);t.default=h,h.propTypes={name:m.PropTypes.string,value:m.PropTypes.string,placeholder:m.PropTypes.string,onItemsChange:m.PropTypes.func},h.defaultProps={placeholder:"Enter..."}},208:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),o=a(l),r=n(7),u=a(r),i=n(8),s=a(i),d=n(10),p=a(d),c=n(9),f=a(c),m=n(1),y=a(m),h=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.value,a=e.index,l=e.children;return y.default.createElement("div",{className:"input-group margin"},y.default.createElement("input",{type:"text",className:"form-control",value:n,onChange:function(e){t(e.target.value,a)}}),l)}}]),t}(m.Component);h.propTypes={index:m.PropTypes.number.isRequired,value:m.PropTypes.string.isRequired,onChange:m.PropTypes.func};var v=function(e){function t(){(0,u.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.onPropChange=function(t,n){var a=e.props,l=a.items,o=a.onItemsChange;l[n]=t,o(l)},e.onPropDelete=function(t){var n=e.props,a=n.items,l=n.onItemsChange;a.splice(t,1),l(a)},e.onNewPropChange=function(t){e.setState({newItem:t})},e.onAddProp=function(){var t=e.props,n=t.items,a=t.onItemsChange;null==n&&(n=[]),n.push(e.state.newItem),a(n),e.setState({newItem:""})},e.renderProperties=function(e,t,n){return e?e.map(function(e,a){return y.default.createElement(h,{key:a,index:a,value:e,onChange:t},y.default.createElement("span",{className:"input-group-btn"},y.default.createElement("button",{type:"button",onClick:function(){return n(a)},className:"btn btn-danger btn-flat"},"Delete")))}):null},e.state={newItem:""},e}return(0,f.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.state.newItem,t=this.props.items;return y.default.createElement("div",null,y.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},y.default.createElement("label",null," Key Features: "),y.default.createElement("div",null,y.default.createElement(h,{key:"newItem",index:-1,value:e,onChange:this.onNewPropChange},y.default.createElement("span",{className:"input-group-btn"},y.default.createElement("button",{type:"button",disabled:e.length<1,onClick:this.onAddProp,className:"btn btn-primary btn-flat"},"Add")))),this.renderProperties(t,this.onPropChange,this.onPropDelete)))}}]),t}(m.Component);t.default=v,v.propTypes={name:m.PropTypes.string,items:m.PropTypes.array,onItemsChange:m.PropTypes.func,fileURL:m.PropTypes.string,onValueUpdated:m.PropTypes.func},v.defaultProps={}},209:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),o=a(l),r=n(7),u=a(r),i=n(8),s=a(i),d=n(10),p=a(d),c=n(9),f=a(c),m=n(1),y=a(m),h=function(e){function t(){(0,u.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.onImageDelete=function(t){e.props.onImagesDelete(t)},e.renderImages=function(e,t){return e?e.map(function(e,n){return y.default.createElement("div",{key:n},y.default.createElement("img",{width:40,key:n,src:e}),y.default.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){t(n)}},"Delete"))}):null},e.onChange=function(t){for(var n=[],a=0;a<t.length;a++)n.push(t[a]);e.props.onFileChange(n)},e}return(0,f.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.images;t.onFileChange;return y.default.createElement("div",null,y.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},y.default.createElement("label",{htmlFor:"exampleInputFile"},"Images:"),y.default.createElement("input",{onChange:function(t){e.onChange(t.target.files)},type:"file",accept:"image/*",id:"exampleInputFile",multiple:"multiple"}),this.renderImages(n,this.onImageDelete)))}}]),t}(m.Component);t.default=h,h.propTypes={name:m.PropTypes.string,images:m.PropTypes.array,onFileChange:m.PropTypes.func,onImagesDelete:m.PropTypes.func},h.defaultProps={}},210:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),o=a(l),r=n(7),u=a(r),i=n(8),s=a(i),d=n(10),p=a(d),c=n(9),f=a(c),m=n(1),y=a(m),h=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this))}return(0,f.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,a=e.placeholder,l=e.onChange;return y.default.createElement("div",null,y.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},y.default.createElement("label",{htmlFor:"exampleInputEmail1"},n),y.default.createElement("input",{type:"text",onChange:function(e){l(e.target.value)},value:t,className:"form-control",id:"exampleInputEmail1",placeholder:a,autoComplete:"off"})))}}]),t}(m.Component);t.default=h,h.propTypes={name:m.PropTypes.string,label:m.PropTypes.string,placeholder:m.PropTypes.string,onChange:m.PropTypes.func},h.defaultProps={placeholder:"Type here"}},211:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),o=a(l),r=n(7),u=a(r),i=n(8),s=a(i),d=n(10),p=a(d),c=n(9),f=a(c),m=n(1),y=a(m),h=function(e){function t(){(0,u.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.onPropSelected=function(t){var n=e.props,a=n.onChange,l=n.value,o=n.index;a(t,l,o)},e.state={selectedIndex:0,newItem:{property:"",value:""}},e}return(0,f.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.items,n=e.property,a=t.indexOf(n);a=a==-1?0:a,this.setState({selectedIndex:a,property:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,a=t.onChange,l=t.property,o=t.value,r=t.index,u=t.children,i=n.map(function(t,n){return y.default.createElement(v,{key:n,value:t,onClick:e.onPropSelected})});return y.default.createElement("div",{className:"input-group margin"},y.default.createElement("div",{className:"input-group-btn"},y.default.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},l,y.default.createElement("span",{className:"fa fa-caret-down"})),y.default.createElement("ul",{className:"dropdown-menu"},i)),y.default.createElement("input",{type:"text",className:"form-control",value:o,onChange:function(e){a(l,e.target.value,r)}}),u)}}]),t}(m.Component);h.propTypes={index:m.PropTypes.number.isRequired,items:m.PropTypes.array.isRequired,property:m.PropTypes.string.isRequired,value:m.PropTypes.string.isRequired,onChange:m.PropTypes.func};var v=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onClick;return y.default.createElement("li",null,y.default.createElement("a",{onClick:function(){return n(t)}},t))}}]),t}(m.Component),g=function(e){function t(){(0,u.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this));b.call(e);var n=["Price","Basement Type","Storeys","Land Size"];return e.state={newItem:{property:n[0],value:""},properties:n},e}return(0,f.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.state,t=e.properties,n=e.newItem,a=this.props.items;return y.default.createElement("div",null,y.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},y.default.createElement("label",null," Properties: "),y.default.createElement("div",null,y.default.createElement(h,{key:"newItem",items:t,index:-1,value:n.value,property:n.property,onChange:this.onNewPropChange},y.default.createElement("span",{className:"input-group-btn"},y.default.createElement("button",{type:"button",disabled:n.value.length<1,onClick:this.onAddProp,className:"btn btn-primary btn-flat"},"Add")))),this.renderProperties(a,t,this.onPropChange,this.onPropDelete)))}}]),t}(m.Component),b=function(){var e=this;this.onPropChange=function(t,n,a){var l={value:n,property:t},o=e.props,r=o.items,u=o.onItemsChange;r[a]=l,u(r)},this.onPropDelete=function(t){var n=e.props,a=n.items,l=n.onItemsChange;a.splice(t,1),l(a)},this.onNewPropChange=function(t,n,a){var l={value:n,property:t};e.setState({newItem:l})},this.onAddProp=function(){var t=e.props,n=t.items,a=t.onItemsChange,l=e.state.properties;null==n&&(n=[]),n.push(e.state.newItem),a(n),e.setState({newItem:{property:l[0],value:""}})},this.renderProperties=function(e,t,n,a){return e?e.map(function(e,l){return y.default.createElement(h,{key:l,index:l,items:t,property:e.property,value:e.value,onChange:n},y.default.createElement("span",{className:"input-group-btn"},y.default.createElement("button",{type:"button",onClick:function(){return a(l)},className:"btn btn-danger btn-flat"},"Delete")))}):null}};t.default=g,g.propTypes={name:m.PropTypes.string,items:m.PropTypes.any,onItemsChange:m.PropTypes.func,fileURL:m.PropTypes.string,onValueUpdated:m.PropTypes.func},g.defaultProps={}},213:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(18),o=a(l),r=n(6),u=a(r),i=n(7),s=a(i),d=n(8),p=a(d),c=n(10),f=a(c),m=n(9),y=a(m),h=n(1),v=a(h),g=function(e){var t=e.label,n=e.value,a=e.type,l=void 0===a?"text":a,o=e.placeholder,r=void 0===o?"Type here":o,u=e.onChange;return v.default.createElement("div",{className:"form-group"},v.default.createElement("label",{htmlFor:"exampleInputEmail1"},t),v.default.createElement("input",{type:l,onChange:u,value:n,className:"form-control",id:"exampleInputEmail1",placeholder:r,autoComplete:"off"}))},b=function(e){var t=e.label,n=e.imageURL,a=e.description,l=void 0===a?"":a,o=(e.placeholder,e.onChange);return v.default.createElement("div",{className:"form-group"},E(n),v.default.createElement("br",null),v.default.createElement("label",{htmlFor:"exampleInputFile"},t),v.default.createElement("input",{onChange:o,type:"file",accept:"image/*",id:"exampleInputFile"}),v.default.createElement("p",{className:"help-block"},l))},E=function(e){if(e)return v.default.createElement("img",{width:"100",src:e})},P=function(e){function t(){var e,n,a,l;(0,s.default)(this,t);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=a=(0,f.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),a.onEmailChange=function(e){a.onFormUpdated("name",e.target.value)},a.onFileChange=function(e){var t=e.target.files[0];a.onFormUpdated("file",t)},a.onFormUpdated=function(e,t){console.log(a.props),a.props.onFormUpdated(e,t)},l=n,(0,f.default)(a,l)}return(0,y.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.fields;e.fileURL;return v.default.createElement("div",null,v.default.createElement("div",{className:"box-body",style:{textAlign:"left"}},v.default.createElement(g,{label:"Name",value:this.props.name,onChange:this.onEmailChange}),v.default.createElement(b,{label:"Image",imageURL:this.props.fileURL,onChange:this.onFileChange,onReference:function(e){t=(0,o.default)({imageInput:e},t)}})))}}]),t}(h.Component);t.default=P,P.propTypes={name:h.PropTypes.string,fileURL:h.PropTypes.string,onFormUpdated:h.PropTypes.func},P.defaultProps={}},214:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(75),o=a(l),r=n(18),u=a(r),i=n(74),s=a(i),d=n(6),p=a(d),c=n(7),f=a(c),m=n(8),y=a(m),h=n(10),v=a(h),g=n(9),b=a(g),E=n(1),P=a(E),_=n(213),T=a(_),C=n(118),I=a(C),k=n(17),w=n(193),N=a(w);n(287);var S=(k.helpers.isLoaded,k.helpers.isEmpty,k.helpers.pathToJS,k.helpers.dataToJS,function(e){function t(){(0,f.default)(this,t);var e=(0,v.default)(this,(t.__proto__||(0,p.default)(t)).call(this));return e.updateModalData=function(t){e.setState({town:t,selectedTown:null,edit:!0,name:t.name,propertyId:t.propertyId,file:null,imageURL:t.image.uri})},e.onFormUpdated=function(t,n){var a={};a[t]=n,e.setState(a)},e.onAddItemSubmit=function(){var t=e.state,n=t.name,a=t.file;e.props.onAddItem({name:n,file:a}),e.resetFormState()},e.onUpdateItemSubmit=function(){var t=e.state,n=t.name,a=t.imageURL,l=t.file,o=t.town,r={key:o.key,name:n,image:{uri:l?null:a},file:l};e.props.onUpdateItem(r),e.resetFormState()},e.resetFormState=function(){setTimeout(function(){e.setState({name:"",file:null,imageURL:null,propertyId:null})},500)},e.selectLinkTown=function(t){e.setState({selectedTown:t})},e.renderRows=function(t){if(t){var n=function(){var n=e.props.properties,a=e.state.selectedTown;if(console.log("Town Table render rows",e.props),t=(0,s.default)(t).map(function(e){return(0,u.default)({key:e},t[e])}))return{v:t.map(function(t,l){var o=e.getTownProperty(t);return P.default.createElement("tr",{key:l},P.default.createElement("td",null,l+1,"."),P.default.createElement("td",null,t.name),P.default.createElement("td",null,P.default.createElement("img",{src:t.image?t.image.uri:"",width:50})),P.default.createElement("td",null,o?o.name:"Town hasn't linked properties",P.default.createElement("br",null),P.default.createElement(w.ModalButton,{label:"Link",onClick:function(){e.selectLinkTown(t)},modalId:"linkProperty"}),P.default.createElement(N.default,{modalId:"linkProperty",modalTitle:"Link Property",canSubmit:!1},P.default.createElement(I.default,{items:n,canDelete:!1,canAdd:!1,renderEditButton:function(t){return P.default.createElement(w.ModalButton,{label:"Link",modalId:"linkProperty",onClick:function(){e.props.onPropertyLink(a.key,t.key)}})}}))),P.default.createElement("td",{className:"manageBtns"},P.default.createElement(w.ModalButton,{label:"Edit",modalId:"myModal",onClick:function(){e.updateModalData(t)}}),P.default.createElement(w.ModalButton,{label:"Delete",modalId:"myModal",className:"btn-danger",onClick:function(){e.deleteItem(t.key)}})))})};
}();if("object"===("undefined"==typeof n?"undefined":(0,o.default)(n)))return n.v}},e.components={},e.state={name:"",file:null,imageURL:null,edit:!1,town:null,towns:null,selectedTown:null},e}return(0,b.default)(t,e),(0,y.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=e.towns,n=e.properties;console.log("componentWillReceiveProps",e),this.setState({towns:t,properties:n})}},{key:"deleteItem",value:function(e){this.props.onDeleteItem(e)}},{key:"getTownProperty",value:function(e){var t=this,n=null;return e.propertyId&&!function(){var a=t.props.properties;(0,s.default)(a).every(function(t){return e.propertyId!=t||(n=a[t],!1)})}(),n}},{key:"render",value:function(){var e=this.state,t=e.edit,n=e.name,a=e.towns,l=t?"Edit Town: "+n:"New Town";return console.log("render",a),P.default.createElement("div",{className:"box-body",style:{backgroundColor:"white"}},P.default.createElement("h3",null,"Town List:"),P.default.createElement("div",{style:{width:"100%",textAlign:"right",paddingBottom:"15px"}},P.default.createElement(w.ModalButton,{label:"Add Town",modalId:"myModal"}),P.default.createElement(N.default,{modalId:"myModal",label:"Add Town",modalTitle:l,onCancel:this.resetFormState,onSubmit:t?this.onUpdateItemSubmit:this.onAddItemSubmit},P.default.createElement(T.default,{name:this.state.name,fileURL:this.state.imageURL,onFormUpdated:this.onFormUpdated}))),P.default.createElement(N.default,{modalId:"myModal",label:"",modalTitle:l,onCancel:this.resetFormState,onSubmit:t?this.onUpdateItemSubmit:this.onAddItemSubmit},P.default.createElement(T.default,{name:this.state.name,fileURL:this.state.imageURL,onFormUpdated:this.onFormUpdated})),P.default.createElement("table",{className:"table table-bordered"},P.default.createElement("tbody",null,P.default.createElement("tr",null,P.default.createElement("th",{style:{width:10}},"#"),P.default.createElement("th",null,"Name"),P.default.createElement("th",null,"Image"),P.default.createElement("th",null,"Property"),P.default.createElement("th",{style:{width:200}},"Actions")),this.renderRows(a))))}}]),t}(E.Component));t.default=S,S.propTypes={towns:E.PropTypes.any,properties:E.PropTypes.any,onDeleteItem:E.PropTypes.func.isRequired,onAddItem:E.PropTypes.func.isRequired,onUpdateItem:E.PropTypes.func.isRequired,onPropertyLink:E.PropTypes.func.isRequired}},215:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(18),o=a(l),r=n(6),u=a(r),i=n(7),s=a(i),d=n(8),p=a(d),c=n(10),f=a(c),m=n(9),y=a(m),h=n(1),v=a(h),g=n(214),b=a(g),E=n(17),P=(E.helpers.isLoaded,E.helpers.isEmpty,E.helpers.pathToJS,E.helpers.dataToJS,function(e){function t(){(0,s.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.onAddItemSubmit=function(t){var n=e.state.ref,a=e.props.firebase;console.log(t);var l=t.file;n.child(l.name).put(l).then(function(e){a.push("/towns",{name:t.name,image:{uri:e.downloadURL}})})},e.onAddItemUpdate=function(t){var n=e.state.ref,a=e.props.firebase,l={},o=t.name,r=t.image,u=t.file,i=t.key;l[i]={name:o,image:r},null==r.uri?n.child(u.name).put(u).then(function(e){l[i].image={uri:e.downloadURL},a.update("/towns",l)}):a.update("/towns",l)},e.onAddItemDelete=function(t){var n=e.props.firebase,a={};a[t]=null,n.update("/towns",a)},e.onPropertyLink=function(t,n){var a=e.props,l=a.towns,r=a.firebase,u=(0,o.default)({},l[t],{propertyId:n});console.log("onPropertyLink",u),r.ref("/towns/"+t).update(u)},e}return(0,y.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.firebase;if(e){var t=e.storage().ref(),n=t.child("images");this.state={ref:n},this.forms={}}}},{key:"render",value:function(){var e=this.props,t=e.towns,n=e.properties;return v.default.createElement("div",{style:{margin:"0 auto"}},v.default.createElement(b.default,{towns:t,properties:n,onAddItem:this.onAddItemSubmit,onUpdateItem:this.onAddItemUpdate,onDeleteItem:this.onAddItemDelete,onPropertyLink:this.onPropertyLink}))}}]),t}(h.Component));t.default=P,P.propTypes={towns:h.PropTypes.object}},216:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(24),o=n(17),r=n(215),u=a(r),i=o.helpers.dataToJS,s={},d=function(e){var t=i(e.firebaseStateReducer,"/towns"),n=i(e.firebaseStateReducer,"/properties");return console.log("mapStateToProps towns",{towns:t,properties:n}),{towns:t,properties:n}},p=(0,o.firebaseConnect)(["/towns","/properties"])(u.default);t.default=(0,l.connect)(d,s)(p)},239:function(e,t,n){n(275),e.exports=n(12).Object.keys},275:function(e,t,n){var a=n(64),l=n(38);n(131)("keys",function(){return function(e){return l(a(e))}})},285:282,286:282,287:282});